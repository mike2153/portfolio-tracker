<!DOCTYPE html>
<html>
<head>
    <title>Debug Chart Data</title>
</head>
<body>
    <h1>Chart Data Debug</h1>
    <div id="results"></div>
    
    <script>
        // Simulate API call to check data
        fetch('http://localhost:8000/api/portfolio/performance/historical?period=1M&benchmark=SPY')
            .then(response => response.json())
            .then(data => {
                console.log('Monthly data response:', data);
                
                const results = document.getElementById('results');
                results.innerHTML = `
                    <h2>Monthly Data (1M) Results:</h2>
                    <p>Portfolio points: ${data.portfolio_performance?.length || 0}</p>
                    <p>Benchmark points: ${data.benchmark_performance?.length || 0}</p>
                    
                    <h3>Portfolio First/Last Values:</h3>
                    <p>First: ${data.portfolio_performance?.[0]?.date} = $${data.portfolio_performance?.[0]?.value}</p>
                    <p>Last: ${data.portfolio_performance?.[data.portfolio_performance?.length - 1]?.date} = $${data.portfolio_performance?.[data.portfolio_performance?.length - 1]?.value}</p>
                    
                    <h3>Benchmark First/Last Values:</h3>
                    <p>First: ${data.benchmark_performance?.[0]?.date} = $${data.benchmark_performance?.[0]?.value}</p>
                    <p>Last: ${data.benchmark_performance?.[data.benchmark_performance?.length - 1]?.date} = $${data.benchmark_performance?.[data.benchmark_performance?.length - 1]?.value}</p>
                    
                    <h3>Starting Value Difference:</h3>
                    <p>Portfolio starts at: $${data.portfolio_performance?.[0]?.value}</p>
                    <p>Benchmark starts at: $${data.benchmark_performance?.[0]?.value}</p>
                    <p>Difference: $${(data.portfolio_performance?.[0]?.value || 0) - (data.benchmark_performance?.[0]?.value || 0)}</p>
                `;
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('results').innerHTML = `<p>Error: ${error.message}</p>`;
            });
    </script>
</body>
</html>